{% extends 'admin/master.html' %}

{% block page_title %}
<h1 class="text-xl font-semibold text-gray-800 mb-4">
  {{ layout.menu_icon(admin_view.menu) }}
  Инагенты (<span id="inagents-count">{{ total_count }}</span>)
</h1>
{% endblock %}

{% block body %}
<div>
  <div class="my-3 flex flex-wrap gap-4 items-end">
    <div class="flex-1 min-w-[200px]">
      <label for="inagent-search" class="block text-sm font-medium text-gray-700 mb-1">Поиск</label>
      <div class="relative">
        <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400">
          <i class="fa fa-search" aria-hidden="true"></i>
        </div>
        <input type="text" id="inagent-search" name="q" placeholder="Наименование или номер"
               class="block w-full rounded-lg border border-gray-300 bg-white py-2 pl-10 pr-3 text-sm placeholder-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"
               data-data-url="{{ request.path.rstrip('/') }}/data">
      </div>
    </div>
    <div class="w-48">
      <label for="inagent-type-filter" class="block text-sm font-medium text-gray-700 mb-1">Тип</label>
      <select id="inagent-type-filter" class="block w-full rounded-lg border border-gray-300 bg-white py-2 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500">
        <option value="">Все</option>
        <option value="fiz">Физ. лицо</option>
        <option value="ur">Юр. лицо</option>
        <option value="other">Иное</option>
      </select>
    </div>
    <div class="w-48">
      <label for="inagent-status-filter" class="block text-sm font-medium text-gray-700 mb-1">Статус</label>
      <select id="inagent-status-filter" class="block w-full rounded-lg border border-gray-300 bg-white py-2 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500">
        <option value="">Все</option>
        <option value="listed">Числится</option>
        <option value="removed">Снят</option>
      </select>
    </div>
    <div class="w-48">
      <label for="inagent-phrases-filter" class="block text-sm font-medium text-gray-700 mb-1">Фразы</label>
      <select id="inagent-phrases-filter" class="block w-full rounded-lg border border-gray-300 bg-white py-2 px-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500">
        <option value="">Все</option>
        <option value="yes">Есть</option>
        <option value="no">Нет</option>
      </select>
    </div>
  </div>

  <div id="inagents-grid-wrapper" class="my-3"></div>
</div>

<div id="inagent-edit-modal" class="fixed inset-0 z-50 hidden overflow-y-auto" role="dialog" aria-modal="true">
  <div class="flex min-h-full items-center justify-center p-4">
    <div class="fixed inset-0 bg-black/50" data-modal-close="inagent-edit-modal"></div>
    <div class="relative rounded-lg bg-white shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-6">
      <button type="button" class="absolute top-2 right-2 rounded text-gray-400 hover:text-gray-600" data-modal-close="inagent-edit-modal" aria-label="Закрыть"><i class="fa fa-times"></i></button>
      <div id="inagent-edit-modal-body"></div>
    </div>
  </div>
</div>

<style>
#inagents-grid-wrapper .gridjs-wrapper { font-size: 0.8125rem; }
#inagents-grid-wrapper .gridjs-table { width: 100%; table-layout: auto; }
#inagents-grid-wrapper .gridjs-th,
#inagents-grid-wrapper .gridjs-td { padding: 0.25rem 0.5rem; vertical-align: middle; }
#inagents-grid-wrapper .gridjs-btn {
  margin-left: 0.2rem;
  padding: 0.15rem 0.35rem;
  font-size: 0.75rem;
}
.search-highlight { background-color: #93c5fd; }
</style>
{% endblock %}
