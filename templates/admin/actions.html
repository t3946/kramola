{% import 'admin/static.html' as admin_static with context %}

{% macro dropdown(actions, btn_class='px-3 py-2 rounded border border-gray-300 bg-white hover:bg-gray-50 text-sm') %}
<div class="relative inline-block" x-data="{ open: false }">
  <button type="button" class="{{ btn_class }}" @click="open = !open" @click.outside="open = false">
    {{ _gettext('With selected') }} <i class="fa fa-caret-down ml-1"></i>
  </button>
  <div x-show="open" x-cloak class="absolute left-0 top-full mt-1 py-1 bg-white border border-gray-200 rounded shadow-lg z-50 min-w-[140px]">
    {% for p in actions %}
    <a class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" href="javascript:void(0)" onclick="return modelActions.execute('{{ p[0] }}');">{{ _gettext(p[1]) }}</a>
    {% endfor %}
  </div>
</div>
{% endmacro %}

{% macro form(actions, url) %}
{% if actions %}
<form id="action_form" action="{{ url }}" method="POST" class="hidden">
  {% if action_form.csrf_token is defined and action_form.csrf_token %}
  {{ action_form.csrf_token }}
  {% elif csrf_token is defined and csrf_token %}
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
  {% endif %}
  {% if return_url is defined and return_url %}
  {{ action_form.url(value=return_url) }}
  {% else %}
  {{ action_form.url() }}
  {% endif %}
  {{ action_form.action() }}
</form>
{% endif %}
{% endmacro %}

{% macro script(message, actions, actions_confirmation) %}
{% if actions %}
<div id="actions-confirmation-data" class="hidden">{{ actions_confirmation|tojson|safe }}</div>
<div id="message-data" class="hidden">{{ message|tojson|safe }}</div>
<script {{ admin_csp_nonce_attribute }} src="{{ admin_static.url(filename='admin/js/actions.js', v='1.0.0') }}"></script>
{% endif %}
{% endmacro %}
