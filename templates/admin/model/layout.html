{% macro filter_options(btn_class='dropdown-toggle') %}
<div class="relative inline-block" x-data="{ open: false }">
  <button type="button" class="px-3 py-2 rounded border border-gray-300 bg-white hover:bg-gray-50 text-sm" @click="open = !open" @click.outside="open = false">
    {{ _gettext('Add Filter') }} <i class="fa fa-caret-down ml-1"></i>
  </button>
  <div x-show="open" x-cloak class="absolute left-0 top-full mt-1 py-1 bg-white border border-gray-200 rounded shadow-lg z-50 min-w-[160px]">
    {% for k in filter_groups %}
    <a href="javascript:void(0)" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 filter" onclick="return false;">{{ k }}</a>
    {% endfor %}
  </div>
</div>
{% endmacro %}

{% macro export_options(btn_class='dropdown-toggle') %}
{% if admin_view.export_types|length > 1 %}
<div class="relative inline-block" x-data="{ open: false }">
  <button type="button" class="px-3 py-2 rounded border border-gray-300 bg-white hover:bg-gray-50 text-sm" @click="open = !open" @click.outside="open = false">
    {{ _gettext('Export') }} <i class="fa fa-caret-down ml-1"></i>
  </button>
  <div x-show="open" x-cloak class="absolute left-0 top-full mt-1 py-1 bg-white border border-gray-200 rounded shadow-lg z-50 min-w-[120px]">
    {% for export_type in admin_view.export_types %}
    <a class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" href="{{ get_url('.export', export_type=export_type, **request.args) }}" title="{{ _gettext('Export') }}">{{ _gettext('Export') }} {{ export_type|upper }}</a>
    {% endfor %}
  </div>
</div>
{% else %}
<a class="px-3 py-2 rounded border border-gray-300 bg-white hover:bg-gray-50 text-sm" href="{{ get_url('.export', export_type=admin_view.export_types[0], **request.args) }}" title="{{ _gettext('Export') }}">{{ _gettext('Export') }}</a>
{% endif %}
{% endmacro %}

{% macro filter_form() %}
<form id="filter_form" method="GET" action="{{ return_url }}">
  {% for arg_name, arg_value in extra_args.items() %}
  <input type="hidden" name="{{ arg_name }}" value="{{ arg_value }}">
  {% endfor %}
  {% if sort_column is not none %}
  <input type="hidden" name="sort" value="{{ sort_column }}">
  {% endif %}
  {% if sort_desc %}
  <input type="hidden" name="desc" value="1">
  {% endif %}
  {% if search %}
  <input type="hidden" name="search" value="{{ search }}">
  {% endif %}
  {% if page_size != default_page_size %}
  <input type="hidden" name="page_size" value="{{ page_size }}">
  {% endif %}
  <div class="mb-4 flex justify-end gap-2">
    <button type="submit" class="hidden">{{ _gettext('Apply') }}</button>
    {% if active_filters %}
    <a href="{{ clear_search_url }}" class="px-3 py-2 rounded border border-gray-300 bg-white text-sm hover:bg-gray-50">{{ _gettext('Reset Filters') }}</a>
    {% endif %}
  </div>
  <table class="filters"></table>
</form>
{% endmacro %}

{% macro search_form(input_class="col-auto") %}
<form method="GET" action="{{ return_url }}" class="flex flex-wrap items-center gap-2 my-4" role="search">
  {% for flt_name, flt_value in filter_args.items() %}
  <input type="hidden" name="{{ flt_name }}" value="{{ flt_value }}">
  {% endfor %}
  {% if page_size != default_page_size %}
  <input type="hidden" name="page_size" value="{{ page_size }}">
  {% endif %}
  {% for arg_name, arg_value in extra_args.items() %}
  <input type="hidden" name="{{ arg_name }}" value="{{ arg_value }}">
  {% endfor %}
  {% if sort_column is not none %}
  <input type="hidden" name="sort" value="{{ sort_column }}">
  {% endif %}
  {% if sort_desc %}
  <input type="hidden" name="desc" value="1">
  {% endif %}
  <div class="flex items-center gap-2">
    <input class="rounded border border-gray-300 py-2 px-3 text-sm w-64 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 {{ input_class }}" size="30" type="text" name="search" value="{{ search or '' }}" placeholder="{{ _gettext('%(placeholder)s', placeholder=search_placeholder) }}">
    <button type="submit" class="px-3 py-2 rounded bg-gray-800 text-white text-sm hover:bg-gray-700">{{ _gettext('Search') }}</button>
    {% if search %}
    <a href="{{ clear_search_url }}" class="text-gray-500 hover:text-gray-700" title="{{ _gettext('Clear') }}"><i class="fa fa-times"></i></a>
    {% endif %}
  </div>
</form>
{% endmacro %}

{% macro page_size_form(generator, page_size_options, btn_class='nav-link dropdown-toggle') %}
<div class="relative inline-block" x-data="{ open: false }">
  <button type="button" class="px-3 py-2 rounded border border-gray-300 bg-white hover:bg-gray-50 text-sm" @click="open = !open" @click.outside="open = false">
    {{ page_size }} {{ _gettext('items') }} <i class="fa fa-caret-down ml-1"></i>
  </button>
  <div x-show="open" x-cloak class="absolute left-0 top-full mt-1 py-1 bg-white border border-gray-200 rounded shadow-lg z-50 min-w-[100px]">
    {% for option in page_size_options %}
    <a class="block px-4 py-2 text-sm {{ 'bg-gray-100 font-medium' if page_size == option else 'hover:bg-gray-100' }}" href="{{ generator(option) }}">{{ _ngettext('{} item'.format(option), '{} items'.format(option), option) }}</a>
    {% endfor %}
  </div>
</div>
{% endmacro %}
